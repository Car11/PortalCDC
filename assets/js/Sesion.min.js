let local=!1;function Login(){local=-1==$("#username").val().search("@"),$("#login-form").validate({rules:{password:{required:!0},username:{required:!0}},messages:{password:{required:"Ingrese su contraseña."},username:{required:"Ingrese su usuario de dominio."}},submitHandler:submitForm})}function submitForm(){$.ajax({type:"POST",url:"class/Usuario.php",data:{action:"Login",username:$("#username").val(),password:$("#password").val(),local:local,beforeSend:function(){$("#error").fadeOut()}}}).done(function(e){var data=JSON.parse(e);"nologin"==data.status&&$("#error").fadeIn(2e3,function(){$("#error").html('<div class="alert alert-danger"> <span class="glyphicon glyphicon-info-sign"></span> &nbsp; Usuario/Contraseña inválido!</div>')}),"badUsername"==data.status?$("#error").fadeIn(2e3,function(){$("#error").html('<div class="alert alert-danger"> <span class="glyphicon glyphicon-info-sign"></span> &nbsp; El usuario debe ser el correo ICE</div>')}):"error"==data.status?$("#error").fadeIn(2e3,function(){$("#error").html('<div class="alert alert-danger"> <span class="glyphicon glyphicon-info-sign"></span> &nbsp; Error!</div>')}):"OK"==data.status&&(location.href=data.url)}).fail(function(e){var data=JSON.parse(e);$("#error").fadeIn(2e3,function(){$("#error").html('<div class="alert alert-danger"> <span class="glyphicon glyphicon-info-sign"></span> &nbsp; '+data.status+" !</div>")})})}