var id="NULL";$(document).ready(function(){});function Send(){}function Connect(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"Connect",username:$("#username").val(),password:$("#password").val()}}).done(function(a){var e=JSON.parse(a);return null==e.iderr||($("#aplicacion").html("<optgroup label='Aplicaciones'></optgroup>"),$("#rama").html("<optgroup label='Rama'></optgroup>"),$("#grupo").html("<optgroup label='Grupo'></optgroup>"),alert(e.iderr+": "+e.error),!1)}).fail(function(a){return alert("Err "+a),!1})}function getApps(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getApps",username:$("#username").val(),password:$("#password").val(),ambiente:"Producción"}}).done(function(a){$("#aplicacion").html("<optgroup label='Aplicaciones'></optgroup>");var e=JSON.parse(a);null==e.ide?($.each(e,function(a,e){try{$("#aplicacion").append("<option value="+a+">"+e.cn[0]+"</option>")}catch(a){}}),sortSelect("aplicacion")):alert(e.ide+": "+e.error)}).fail(function(a){alert("Err "+a)})}function getRamas(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getRamas",username:$("#username").val(),password:$("#password").val(),ambiente:"Producción"}}).done(function(a){$("#rama").html("<optgroup label='Rama'></optgroup>");var e=JSON.parse(a);null==e.ide?($.each(e,function(a,e){try{$("#rama").append("<option value="+a+">"+e.ou[0]+"</option>")}catch(a){}}),sortSelect("rama"),$("#rama").val(0)):alert(e.ide+": "+e.error)}).fail(function(a){alert("Err "+a)})}function getGroupsByAppName(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getGroupsByAppName",username:$("#username").val(),password:$("#password").val(),ambiente:"Producción",app:$("#aplicacion").find(":selected").text()}}).done(function(a){$("#grupo").html("");var e=JSON.parse(a);null==e.ide?($.each(e,function(a,e){try{$("#grupo").append("<option value="+a+">"+e.cn[0]+"</option>")}catch(a){}}),sortSelect("grupo")):alert(e.ide+": "+e.error)}).fail(function(a){alert("Err "+a)}).always(function(){$("#grupo").selectpicker("refresh")})}function getMembershipByUser(){var a=$("#usuarios").val().split("\n");$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getMembershipByUser",uids:a}}).done(function(a){$("#membresia").html("");var e=JSON.parse(a);$.each(e,function(a,e){try{$("#membresia").append("<option value="+a+">"+e.dn+" ["+e.description[0]+"]</option>")}catch(a){}}),sortSelect("membresia"),$("#membresia").selectpicker("refresh")}).fail(function(a){alert("Err "+a)})}function sortSelect(a){var e=$("#"+a+" option"),t=e.map(function(a,e){return{t:$(e).text(),v:e.value}}).get();t.sort(function(a,e){var t=a.t.toLowerCase(),r=e.t.toLowerCase();return t>r?1:t<r?-1:0}),e.each(function(a,e){e.value=t[a].v,$(e).text(t[a].t)})}function AddUser(){""==!$("#userlist").val()?$("#grupo option:selected").each(function(){alert(this.text+" "+this.value)}):alert("Ingrese los valores del usuario.")}