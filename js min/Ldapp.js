var id="NULL";$(document).ready(function(){});function Send(){}function Connect(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"Connect",username:$("#username").val(),password:$("#password").val()}}).done(function(a){var b=JSON.parse(a);return!(null!=b.iderr)||($("#aplicacion").html("<optgroup label='Aplicaciones'></optgroup>"),$("#rama").html("<optgroup label='Rama'></optgroup>"),$("#grupo").html("<optgroup label='Grupo'></optgroup>"),alert(b.iderr+": "+b.error),!1)}).fail(function(a){return alert("Err "+a),!1})}function getApps(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getApps",username:$("#username").val(),password:$("#password").val(),ambiente:"Producci\xF3n"}}).done(function(a){$("#aplicacion").html("<optgroup label='Aplicaciones'></optgroup>");var b=JSON.parse(a);return null==b.ide?void($.each(b,function(c,d){try{$("#aplicacion").append("<option value="+c+">"+d.cn[0]+"</option>")}catch(f){}}),sortSelect("aplicacion")):void alert(b.ide+": "+b.error)}).fail(function(a){alert("Err "+a)})}function getRamas(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getRamas",username:$("#username").val(),password:$("#password").val(),ambiente:"Producci\xF3n"}}).done(function(a){$("#rama").html("<optgroup label='Rama'></optgroup>");var b=JSON.parse(a);return null==b.ide?void($.each(b,function(c,d){try{$("#rama").append("<option value="+c+">"+d.ou[0]+"</option>")}catch(f){}}),sortSelect("rama"),$("#rama").val(0)):void alert(b.ide+": "+b.error)}).fail(function(a){alert("Err "+a)})}function getGroupsByAppName(){$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getGroupsByAppName",username:$("#username").val(),password:$("#password").val(),ambiente:"Producci\xF3n",app:$("#aplicacion").find(":selected").text()}}).done(function(a){$("#grupo").html("");var b=JSON.parse(a);return null==b.ide?void($.each(b,function(c,d){try{$("#grupo").append("<option value="+c+">"+d.cn[0]+"</option>")}catch(f){}}),sortSelect("grupo")):void alert(b.ide+": "+b.error)}).fail(function(a){alert("Err "+a)}).always(function(){$("#grupo").selectpicker("refresh")})}function getMembershipByUser(){var a=$("#usuarios").val().split("\n");$.ajax({type:"POST",url:"../class/Ldapp.php",data:{action:"getMembershipByUser",uids:a}}).done(function(b){$("#membresia").html("");var c=JSON.parse(b);$.each(c,function(d,f){try{$("#membresia").append("<option value="+d+">"+f.dn+" ["+f.description[0]+"]</option>")}catch(g){}}),sortSelect("membresia"),$("#membresia").selectpicker("refresh")}).fail(function(b){alert("Err "+b)})}function sortSelect(a){var b=$("#"+a+" option"),c=b.map(function(d,f){return{t:$(f).text(),v:f.value}}).get();c.sort(function(d,f){var g=d.t.toLowerCase(),h=f.t.toLowerCase();return g>h?1:g<h?-1:0}),b.each(function(d,f){f.value=c[d].v,$(f).text(c[d].t)})}function AddUser(){""==!$("#userlist").val()?$("#grupo option:selected").each(function(){alert(this.text+" "+this.value)}):alert("Ingrese los valores del usuario.")}